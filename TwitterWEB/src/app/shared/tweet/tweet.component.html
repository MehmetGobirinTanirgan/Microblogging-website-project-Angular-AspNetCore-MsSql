<article *ngIf="tweetFlag && tweet != null" class="border-bottom">
  <div class="d-flex">
    <div class="col-lg-2 mt-3">
      <a routerLink="/{{tweet.userID}}" class="tweet-link">
        <div class="rounded-img-container mx-3 mb-4">
          <img class="rounded-img tweet-user-img" [src]="tweet.profilePicPath" alt="tweet-user-profile-picture">
        </div>
      </a>
    </div>
    <div class="col-lg-10">
      <div class="d-flex justify-content-between flex-column">
        <div class="d-flex justify-content-between">
          <div class="d-inline-block">
            <a routerLink="/{{tweet.userID}}" class="tweet-link fw-bold clr-blck">{{tweet.fullname}} </a>
            <label class="transp-text">@{{tweet.username}} </label>
            <span class="ms-1">&#183;</span><a (click)="tweetReplyStream()"
              class="tweet-link ms-1 transp-text">{{tweet.createdDate
              | date:'dd.MM.yyyy'}}</a>
          </div>
          <div ngbDropdown #dropDown="ngbDropdown" class="me-4">
            <a (click)="$event.stopPropagation(); dropDown.open();" class="tweet-link tweet-opts" role="button"><i
                class="fas fa-ellipsis-h"></i></a>
            <div ngbDropdownMenu>
              <a ngbDropdownItem *ngIf="tweet.ownershipStatus === true && tweet.followFlag === false"
                (click)="deleteTweet()" class="tweet-delete-btn tweet-link dec-none"><i class="far fa-trash-alt"></i>
                Delete</a>
              <a ngbDropdownItem *ngIf="tweet.ownershipStatus === false && tweet.followFlag === true"
                (click)="unfollow()" class="tweet-link follow-unfollow-btn dec-none"><i class="fas fa-user-times"></i>
                Unfollow</a>
              <a ngbDropdownItem *ngIf="tweet.ownershipStatus === false && tweet.followFlag === false"
                (click)="follow()" class="tweet-link follow-unfollow-btn dec-none"><i class="fas fa-user-plus"></i>
                Follow</a>
            </div>
          </div>
        </div>
        <div *ngIf="tweet.mainTweetOwnerID !== null && tweet.mainTweetOwnerUsername !== null">
          <label class="transp-text me-1">Replying to </label>
          <a routerLink="/{{tweet.mainTweetOwnerID}}" class="tweet-link">@{{tweet.mainTweetOwnerUsername}} </a>
        </div>
      </div>
      <div *ngIf="tweet.tweetDetail !== null">
        <p class="text-break pe-4">
          {{tweet.tweetDetail}}
        </p>
      </div>
      <div *ngIf="tweet.tweetImageInfos.length > 0" class="mb-4 rd20x img-div">
        <a *ngFor = "let img of tweet.tweetImageInfos" class="twt-img-link" aria-label="image-link">
            <img [src]="img.imagePath" class="tweet-img" [style.width.%]="tweetImgWidth" [ngStyle]="{'object-fit': tweet.tweetImageInfos.length > 1 ? 'cover':'fill'}"  alt="tweet-image" />
        </a>
      </div>
      <div class="mt-3 tweet-btns">
        <a class="reply-btn tweet-link" (click)="openModal()" aria-label="reply-link">
          <i class="far fa-comment fa-lg"></i>
          <span> {{tweet.replyCounter}}</span>
        </a>
        <a class="retweet-btn tweet-link"><i class="fas fa-retweet fa-lg"></i><span> {{tweet.retweetCounter}}</span></a>
        <a (click)="likeCheck()" #dislikeBtn class="like-btn tweet-link"
          [ngStyle]="{'color': tweet.likeFlag ? '#E44878':''}"><i #heart [ngClass]="tweet.likeFlag ? 'fas' : 'far'"
            class="fa-heart fa-lg"></i><span> {{tweet.likeCounter}}</span></a>
        <a class="share-btn tweet-link"><i class="fas fa-share fa-lg"></i></a>
      </div>
      <a class="stretched-link" (click)="tweetReplyStream()"></a>
    </div>
  </div>
</article>

<app-reply-modal #replyModal></app-reply-modal>
